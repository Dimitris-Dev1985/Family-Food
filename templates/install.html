{% extends "base.html" %}
{% block title %}Î•Î³ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Family Food{% endblock %}
{% block content %}

<div class="text-center mt-4">
  <img src="{{ url_for('static', filename='image.png') }}"
       alt="Family Food Icon" class="img-fluid rounded" style="max-height: 280px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
  <h1 class="mt-3" style="font-size: 2.5em; font-weight: bold;">Family Food</h1>
  <p class="lead">ÎšÎ¬Î½Îµ ÎµÎ³ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Î³Î¹Î± Î¬Î¼ÎµÏƒÎ· Ï€ÏÏŒÏƒÎ²Î±ÏƒÎ· ÏƒÏ„Î·Î½ ÎºÎ¿Ï…Î¶Î¯Î½Î± ÏƒÎ¿Ï…! ğŸ½ï¸</p>

  <button id="installBtn" class="btn btn-success mt-3" >
    ğŸ“² Î•Î³ÎºÎ±Ï„Î¬ÏƒÏ„Î±ÏƒÎ· Î•Ï†Î±ÏÎ¼Î¿Î³Î®Ï‚
  </button>
</div>


<script>
  let deferredPrompt;
  const installBtn = document.getElementById('installBtn');

  window.addEventListener('beforeinstallprompt', (e) => {
    e.preventDefault();
    deferredPrompt = e;
    installBtn.style.display = 'inline-block';

    installBtn.addEventListener('click', () => {
      installBtn.style.display = 'none';
      deferredPrompt.prompt();
      deferredPrompt.userChoice.then((choiceResult) => {
        if (choiceResult.outcome === 'accepted') {
          console.log('User accepted the install prompt');
          // ÎœÎµÏ„Î¬ Ï„Î·Î½ Î±Ï€Î¿Î´Î¿Ï‡Î® â†’ Î­Î»ÎµÎ³Î¾Îµ Î±Î½ ÎµÎ¯Î½Î±Î¹ Ï€ÏÏÏ„Î· Ï†Î¿ÏÎ¬
          if (!localStorage.getItem("ff_installed_once")) {
            localStorage.setItem("ff_installed_once", "1");
            window.location.href = "/login";
          } else {
            window.location.href = "/welcome";
          }
        } else {
          console.log('User dismissed the install prompt');
        }
        deferredPrompt = null;
      });
    });
  });

  // Î•Ï€Î¹Ï€Î»Î­Î¿Î½ Î±ÏƒÏ†Î±Î»Î¹ÏƒÏ„Î¹ÎºÎ® Î´Î¹ÎºÎ»ÎµÎ¯Î´Î±: Î±Î½ Î¿ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ Î¼Ï€Î®ÎºÎµ Ï‡ÎµÎ¹ÏÎ¿ÎºÎ¯Î½Î·Ï„Î± ÏƒÏ„Î¿ /install
  window.addEventListener('DOMContentLoaded', function() {
    if (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true) {
      if (!localStorage.getItem("ff_installed_once")) {
        localStorage.setItem("ff_installed_once", "1");
        window.location.href = "/login";
      } else {
        window.location.href = "/welcome";
      }
    }
  });

  
</script>

{% endblock %}


