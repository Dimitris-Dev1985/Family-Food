{% extends "base.html" %}
{% block content %}


<div class="d-flex justify-content-center mb-3">
  <h2 class="fw-bold mb-1" style="font-size:1.8em;">âš™ï¸ Î¡Ï…Î¸Î¼Î¯ÏƒÎµÎ¹Ï‚</h2>
</div>

<form method="POST" id="settings-form" style="padding-left: 0.5em!important;">
    <!-- Î”Î¹Î±ÎºÏŒÏ€Ï„Î·Ï‚ Reset Onboarding -->
	<div class="form-check form-switch mb-4 d-flex align-items-center gap-2" style="padding-left: 0!important;">
	  <label class="form-check-label" for="reset_onboarding">Î•Ï€Î±Î½Î±Ï†Î¿ÏÎ¬ Î¿Î´Î·Î³Î¹ÏÎ½ Ï€ÏÏÏ„Î·Ï‚ Ï‡ÏÎ®ÏƒÎ·Ï‚:</label>
	  <input class="form-check-input ms-2" type="checkbox" id="reset_onboarding" name="reset_onboarding">
	</div>


    <!-- Î•Ï€Î¹Î»Î¿Î³Î® Ï€ÏÏÏ„Î·Ï‚ Î·Î¼Î­ÏÎ±Ï‚ ÎµÎ²Î´Î¿Î¼Î¬Î´Î±Ï‚ -->
    <div class="mb-4">
      <label for="menu_1st_day" class="form-label">Î ÏÏÏ„Î· Î¼Î­ÏÎ± ÎµÎ²Î´Î¿Î¼Î±Î´Î¹Î±Î¯Î¿Ï… Î¼ÎµÎ½Î¿Ï:</label>
      <select class="form-select" id="menu_1st_day" name="menu_1st_day" style="width: auto;">
        {% for i, day in [(1, 'Î”ÎµÏ…Ï„Î­ÏÎ±'), (2, 'Î¤ÏÎ¯Ï„Î·'), (3, 'Î¤ÎµÏ„Î¬ÏÏ„Î·'), (4, 'Î Î­Î¼Ï€Ï„Î·'), (5, 'Î Î±ÏÎ±ÏƒÎºÎµÏ…Î®'), (6, 'Î£Î¬Î²Î²Î±Ï„Î¿'), (7, 'ÎšÏ…ÏÎ¹Î±ÎºÎ®')] %}
          <option value="{{ i }}" {% if user.menu_1st_day == i %}selected{% endif %}>{{ day }}</option>
        {% endfor %}
      </select>
    </div>

    <button type="submit" class="btn btn-primary">ğŸ’¾ Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ·</button>
  </form>

{% endblock %}



{% block scripts %}

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <script>
      {% for category, message in messages %}
        showAlert("{{ message }}", "{{ category }}", 2000, "center");
      {% endfor %}
    </script>
  {% endif %}
{% endwith %}

<script>
  const switchEl = document.getElementById("reset_onboarding");

  // Î•Ï€Î±Î½ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¯Î·ÏƒÎ· Î±Î½ ÎµÎ¯Ï‡Îµ ÎµÎ½ÎµÏÎ³Î¿Ï€Î¿Î¹Î·Î¸ÎµÎ¯ Ï€ÏÎ¹Î½ (Î¼ÏŒÎ½Î¿ Î±Î½ ÎµÎ¯Î¼Î±ÏƒÏ„Îµ ÏƒÏ„Î¿ /settings)
  if (location.pathname === "/settings" && localStorage.getItem("reset_temp") === "on") {
    switchEl.checked = true;
  }

  // ÎŒÏ„Î±Î½ Î¿ Ï‡ÏÎ®ÏƒÏ„Î·Ï‚ Ï„Î¿ Î±Î»Î»Î¬Î¶ÎµÎ¹, Ï„Î¿ ÎºÎ±Ï„Î±Î³ÏÎ¬Ï†Î¿Ï…Î¼Îµ Ï€ÏÎ¿ÏƒÏ‰ÏÎ¹Î½Î¬
  switchEl.addEventListener("change", () => {
    if (switchEl.checked) {
      localStorage.setItem("reset_temp", "on");
    } else {
      localStorage.removeItem("reset_temp");
    }
  });

  // ÎšÎ±Î¸Î±ÏÎ¯Î¶Î¿Ï…Î¼Îµ Ï„Î¿ localStorage ÏŒÏ„Î±Î½ Ï†Î¿ÏÏ„ÏÎ½ÎµÎ¹ Î· ÏƒÎµÎ»Î¯Î´Î± (ÎºÏÎ±Ï„Î¬Î¼Îµ Î¼ÏŒÎ½Î¿ ÏŒÏƒÎ¿ ÎµÎ¯Î½Î±Î¹ Î±Î½Î¿Î¹Ï‡Ï„Î®)
  window.addEventListener("load", () => {
    if (location.pathname === "/settings") {
      setTimeout(() => localStorage.removeItem("reset_temp"), 500);
    }
  });
</script>

{% endblock %}
