<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="utf-8">
  <title>{% block title %}Food App{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
  <meta name="theme-color" content="#f44336">
  <meta name="apple-mobile-web-app-capable" content="yes">
  {% block head %}{% endblock %}

  <style>
  
	.goalerror-alert.fade {
	  transition: opacity 1s linear;
	}


	.card {
	  border-radius: 18px;
	}
	.card-body {
	  padding: 1.1em 1.2em;
	}
	.card .fw-bold {
	  letter-spacing: 0.5px;
	}
	.favorite-btn {
	  margin-left: 10px;
	}
	@media (max-width: 600px) {
	  .card {
		border-radius: 13px;
		margin-bottom: 0.7em;
	  }
	  .card-body {
		padding: 0.9em 1em;
	  }
	  .form-control.recipe-input {
		font-size: 1em;
		padding: 0.42em 0.8em;
	  }
	}



.card {
  border-radius: 17px !important;
  overflow: hidden;
}
.card-header {
  border-top-left-radius: 17px !important;
  border-top-right-radius: 17px !important;
  background: #f8f9fa;
  border-bottom: none;
}
.card-body {
  border-bottom-left-radius: 17px !important;
  border-bottom-right-radius: 17px !important;
}


.recipe-card {
  transition: box-shadow 0.2s;
}
.recipe-card:active {
  box-shadow: 0 0 0 2px #ffdae0;
}
@media (max-width: 600px) {
  .card {
    margin-bottom: 16px;
  }
  .card-header {
    font-size: 1.11em;
    padding: 12px 17px;
  }
  .card-body {
    padding: 18px 12px !important;
  }
}


.drag-handle {
  color: #888;
  transition: color 0.2s;
  font-size: 20px;
  cursor: grab;
  user-select: none;
}
.recipe-card:active .drag-handle,
.recipe-card:focus .drag-handle {
  color: #888;
}



  
    body {
      background: #f5f6fa;
      min-height: 100vh;
    }
    .container, .main-welcome-container {
      padding-bottom: 70px;
      padding-top: 1.5rem;
    }
    @media (max-width: 600px) {
      .container, .main-welcome-container {
        padding-left: 0.2rem;
        padding-right: 0.2rem;
        padding-bottom: 85px !important;
      }
    }
    /* Responsive tables */
    .table-responsive {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }
	
	
    /* Mobile-friendly inputs & select */
    @media (max-width: 576px) {
      input[type="text"], input[type="number"], select, textarea, .choices__inner, .form-control {
        min-width: 0 !important;
        width: auto;
        font-size: 1.02em;
      }
      .autocomplete-input, #autocomplete-input {
        width: 100% !important;
        min-width: 0 !important;
        max-width: 100% !important;
      }
    }

	@media (max-width: 576px) {
	  .btn-inline, .btn-inline.btn, .btn-inline.btn-sm {
		width: auto !important;
		margin-bottom: 0 !important;
		display: inline-block !important;
		font-size: 0.65em !important;
		padding: 0.2rem 0.4rem !important;
	  }
	}

    /* Mobile buttons - καθολική βελτίωση */
    @media (max-width: 576px) {
      .btn, .btn-sm, .btn-group .btn, .modal-footer .btn {
        width: auto;
        min-width: 0 !important;
        margin-top: 1px;
		margin-bottom: 1px;
        font-size: 0.8em;
        padding: .2rem .4rem;
        box-sizing: border-box;
      }
      .btn-group {
        flex-direction: column !important;
        align-items: stretch !important;
        gap: 0 !important;
      }
      .modal-dialog { margin: 1.5rem auto; max-width: 98vw; }
      .form-check, .input-group { flex-direction: column; align-items: stretch; }
    }
    /* Τελευταία πινελιά: καλύτερα "πατημένα" κουμπιά στη bottom-nav */
    @media (max-width: 576px) {
      .navbar.fixed-bottom .nav-link {
        font-size: 1.01em;
        padding: 0.4rem 0 0.2rem 0;
      }
      .navbar.fixed-bottom .fa {
        font-size: 1.35em;
      }
    }
	
	/* modals format */
	
	@media (max-width: 600px) {
	  .modal-dialog {
		max-width: 280px !important;
		margin: 0.5rem auto;
		position: relative;
		margin-left: auto;
		margin-right: auto;
	  }
	  .modal-content {
		display: flow;
		border-radius: 2rem;
		padding: 0.5em 0.5em 0.4em 0.5em;
		overflow-y: auto;
		max-height: 90vh;
		align-items: center;
		}
		.modal-title {
		  font-size: 1.1rem !important;
		  justify-content: center;
		  text-align: center;
		}
		.modal-body {
		  flex: 1 1 auto;
		  overflow-y: auto;
		}
		.modal-footer {
		  position: sticky;
		  bottom: 0;
		  background: inherit;
		  z-index: 2;
		  box-shadow: 0 -2px 8px -4px #0002;
		}

		.modal-content .alert {
		display: block;
		font-size: small;
		padding: 2px 2px 2px 2px;
		text-align: center;
		}
	  .modal-content label,
	  .modal-content .form-control,
	  .modal-content .form-select,
	  .modal-content .btn {
		font-size: 0.85em !important;
		left: auto !important;
		right: auto !important;
	  }
	}


	.offcanvas {
	  width: 300px !important;
	  max-width: 94vw !important;
	  min-width: 200px !important;
	  border-radius: 16px 0 0 16px !important;
	}
	@media (max-width: 600px) {
	  .offcanvas {
		width: 50vw !important;
		max-width: 50vw !important;
		min-width: 0 !important;
		border-radius: 10px !important;
		left: auto !important;
		right: auto !important;
		max-height: 100vw !important;
		margin-top: 15px;
		margin-bottom: 15px;
	  }
	}

	
  </style>
</head>
<body>
  <div class="container{% if request.endpoint == 'welcome' %} main-welcome-container{% endif %}">
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <div class="alert alert-warning mt-2 mb-2">
          {% for message in messages %}
            <div>{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}
    {% block content %}{% endblock %}
  </div>

  <!-- Bottom nav -->
  <nav class="navbar fixed-bottom navbar-light bg-light shadow-sm" style="z-index:999;">
    <div class="container-fluid justify-content-center p-0">
      <div class="row w-100 text-center">
        <div class="col">
          <a href="/" class="nav-link py-2{% if request.endpoint=='welcome' %} active{% endif %}">
            <i class="fa fa-home fa-lg"></i><div style="font-size:12px;">Αρχική</div>
          </a>
        </div>
        <div class="col">
          <a href="/menu" class="nav-link py-2{% if request.endpoint=='menu' %} active{% endif %}">
            <i class="fa fa-calendar-week fa-lg"></i><div style="font-size:12px;">Μενού</div>
          </a>
        </div>
        <div class="col">
          <a href="/history" class="nav-link py-2{% if request.endpoint=='history' %} active{% endif %}">
            <i class="fa fa-history fa-lg"></i><div style="font-size:12px;">Ιστορικό</div>
          </a>
        </div>
        <div class="col">
          <a href="/favorites" class="nav-link py-2{% if request.endpoint=='favorites' %} active{% endif %}">
            <i class="fa fa-star fa-lg"></i><div style="font-size:12px;">Αγαπημένα</div>
          </a>
        </div>
        <div class="col">
          <a href="/profile" class="nav-link py-2{% if request.endpoint=='profile' %} active{% endif %}">
            <i class="fa fa-user fa-lg"></i><div style="font-size:12px;">Προφίλ</div>
          </a>
        </div>
      </div>
    </div>
  </nav>

  {% block modals %}{% endblock %}

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/js/all.min.js"></script>
  <script>
	if ('serviceWorker' in navigator) {
	  navigator.serviceWorker.register('/static/service-worker.js')
		.then(function() { console.log('Service Worker Registered'); });
	}
  </script>

  {% block scripts %}{% endblock %}

</body>
</html>
